!function(){"use strict";angular.module("app.diagnostics").service("ariaTelemetry",["$window","$injector","constants",function(e,i,t){var n=function(e,i){if(!Utilities.isUndefinedOrNull(e)&&!Utilities.isUndefinedOrNull(i)){if(!Utilities.isUndefinedOrNull(i.pii)){for(var t=0;t<=i.pii.length-1;++t)e.setProperty(i.pii[t].name,i.pii[t].value,i.pii[t].type);delete i.pii}for(var n in i)i.hasOwnProperty(n)&&e.setProperty(n,i[n])}},r=!0;const s=new Set(["FetchLicenseInfo","AppInstalled","AppUpdated","PopupSignInLinkClick","AutoSignInExperiment"]);this.setEnabledSetting=function(e){r=e},this.trackEvent=function(a,o,p){a=a.replace(/\./g,"_"),(r||s.has(a))&&async function(){var e=i.get("storage"),n=await e.get(["userType","identity"]);return n.identity&&n.userType&&n.userType!==t.USER_TYPE.NONE}().then((function(i){if(i||s.has(a)){var r=new AWTEventProperties;r.setName(t.TELEMETRY.EVENT_PREFIX+a),n(r,o),n(r,p),e.ariaLogger.logEvent(r)}}))},this.trackTrace=function(i,s){if(r){var a=new AWTEventProperties;a.setName(t.TELEMETRY.EVENT_PREFIX+i),a.setProperty("severity",i),n(a,s),e.ariaLogger.logEvent(a)}}}])}();