"use strict";var Utilities=function(){var e,n={};return n.deserializeQuery=function(e){var n,r=/\+/g,t=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},o={};for(n=t.exec(e);n;)o[i(n[1])]=i(n[2]),n=t.exec(e);return o},n.getFileExtension=function(e){var n="",r=e.split(".");return r.length>1&&(n=r[r.length-1].toLowerCase()),n},n.navigateToUrlWithNewTab=function(e,r){BrowserHandler.tabs.create({url:e,active:!!n.isUndefinedOrNull(r)||r})},n.isNotUndefinedOrNull=function(e){return!n.isUndefinedOrNull(e)},n.isUndefinedOrNull=function(e){return null==e},n.isExtensionInTestingMode=function(){return n.isNotUndefinedOrNull(window.jasmine)},n.isExtensionInDevelopmentMode=function(){if(n.isExtensionInTestingMode())return!1;if(window.browser&&window.browser.extension){var e=BrowserHandler.runtime.getURL("");if(null!=e&&/extension/i.test(e))return!1}else if(window.chrome&&window.chrome.extension){var r=n.getManifest();if(null==r)return!1;if(void 0!==r.key||void 0!==r.update_url)return!1}return!0},n.isEditorEnabled=function(){if(!window.chrome||!window.chrome.extension)return!1;var e=n.getManifest();return e&&e.background&&"background/background_editor.html"===e.background.page},n.shouldShowEditorMaterial=function(){if(!window.chrome||!window.chrome.extension)return!1;var e=n.getManifest();return e&&e.version_name&&-1!=e.version_name.indexOf("[ed]")},n.getAppDescription=function(){if(window.chrome&&window.chrome.extension)return n.getManifest().description},n.getManifest=function(){if("object"!=typeof BrowserHandler.runtime||"function"!=typeof BrowserHandler.runtime.getManifest)return null;var e=BrowserHandler.runtime.getManifest();return null==e?null:e},n.isBackgroundContext=function(){var e=window.location.href;return!!(window.browser&&window.browser.extension&&/^ms-browser-extension/.test(e)&&window===BrowserHandler.extension.getBackgroundPage())||!!(window.chrome&&window.chrome.extension&&/^chrome/.test(e)&&window===BrowserHandler.extension.getBackgroundPage())},n.getCurrentTime=function(){return Math.round((new Date).getTime()/1e3)},n.isChrome=function(){var e=window.navigator,r=e.userAgent.indexOf("OPR")>-1;return n.isNotUndefinedOrNull(window.chrome)&&e.vendor.indexOf("Google")>-1&&!1===r&&!n.isEdge()},n.isEdge=function(){return window.navigator.userAgent.indexOf("Edg")>-1},n.getBrowserName=function(){return n.isChrome()?"Chrome":"Edge"},n.isRTL=function(){var e=BrowserHandler.i18n.getUILanguage();return!!(/^ar/i.test(e)||/^fa/i.test(e)||/^he/i.test(e))},n.setIcon=function(e){BrowserHandler.browserAction.setIcon({path:e})},n.siteIsBlockedByManifest=function(e){if(!window.chrome||!window.chrome.extension)return!1;var r=n.getManifest();if(!r||!r.content_scripts)return!1;var t=r.content_scripts.filter((function(e){return e.matches&&e.matches.find((function(e){return"<all_urls>"===e}))}));return 1===t.length&&t[0].exclude_matches.find((function(n){return new RegExp(n.replace("*",".*")).test(e)}))},n.getGuid=function(){return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})))},n}();