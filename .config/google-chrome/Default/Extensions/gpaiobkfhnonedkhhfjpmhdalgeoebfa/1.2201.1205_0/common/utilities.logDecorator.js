var Utilities=function(e){"use strict";function t(e){return e.length>8e3?e.substring(0,8e3):e}return e.logDecorator=function(e,n){function r(e,t){try{n.trackTrace(e,t)}catch(e){}}function i(e,t,n){e&&0!==e.length||(e=Error().stack);const r=/[\.\w]*js[\w:]*/.exec(e.split("\n")[3].trim());if(Utilities.isBackgroundContext()){const e=new Date;var i=location.pathname.match(/[^\\/]*($)/)[0],a=`[${e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"medium"})}] (${i}) ${r?r+" ":""} ${t}`;switch(n){case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":console.error(a);break;case"DEBUG":default:console.debug(a)}}else BrowserHandler.runtime.sendMessage({activity:"log",filename:r,severity:n,log:t})}var a=function(e,n){return function(){var a=[].slice.call(arguments),o=t(JSON.stringify(a[0]));"ERROR"===n&&Utilities.isNotUndefinedOrNull(a[0].message)&&(o=t(JSON.stringify(a[0].message)));var s="";"ERROR"===n&&Utilities.isNotUndefinedOrNull(a[0].stack)&&(s=t(a[0].stack));var c={message:o,stack:s};Utilities.isExtensionInDevelopmentMode()&&i(s,o,n),a[0]=String.format("[{0}] {1}: {2}",(new Date).toUTCString(),n,c.message),Utilities.isExtensionInDevelopmentMode()&&e.apply(null,a),"DEBUG"!==n&&r(n,c)}};return e.debug=a(e.debug,"DEBUG"),e.info=a(e.info,"INFO"),e.warn=a(e.warn,"WARN"),e.error=a(e.error,"ERROR"),e.getEnabledSetting=function(){return n.getEnabledSetting()},e.setEnabledSetting=function(t){try{n.setEnabledSetting(t)}catch(t){e.error(String.format("setEnabledSetting error: {0}",t))}},e.trackEvent=function(t,r,i){try{n.trackEvent(t,r,i)}catch(n){e.error(String.format("trackEvent error with eventName {0}: {1}",t,n))}},e.trackTrace=r,e},e}(Utilities||{});