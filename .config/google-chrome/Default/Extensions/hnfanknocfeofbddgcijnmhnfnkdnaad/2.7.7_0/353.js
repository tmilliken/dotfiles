"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[353],{69869:(e,t,n)=>{n.d(t,{z:()=>u});var a,r=n(67294),s=n(67051),o=n(19692),i=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},c=function(e){var t=e.target;t.style.height="auto",t.style.height="".concat(t.scrollHeight+4,"px")};function u(e){var t=e.handleInput,n=e.hasError,a=e.testID,s=e.autoFocus,o=void 0!==s&&s,l=(0,r.useCallback)((function(e){c(e),t(e)}),[t]);return(0,i.jsx)(f,{onChange:l,maxLength:42,rows:1,hasError:n,"data-testid":a,spellCheck:!1,autoFocus:o})}l(u,"useCallback{handleChange}");var d,p,f=(0,s.Z)("textarea")({name:"Textarea",class:"t188r7fg",vars:{"t188r7fg-2":[function(e){return e.hasError?o.palette.negative:o.palette.primary}]}});n(95797),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(c,"resizeTextarea","/workspaces/apps/extension/src/components/ResizableTextarea.tsx"),d.register(u,"ResizableTextarea","/workspaces/apps/extension/src/components/ResizableTextarea.tsx"),d.register(f,"Textarea","/workspaces/apps/extension/src/components/ResizableTextarea.tsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},70483:(e,t,n)=>{n.d(t,{q:()=>l});var a,r=n(6585),s=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var o,i;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function l(e){var t=e.noSearchResultsMessage;return(0,s.jsx)(r.VStack,{alignItems:"center",justifyContent:"center",height:"100%",spacingHorizontal:1,children:t})}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(l,"NoSearchResults","/workspaces/apps/extension/src/components/SearchSuggestionsList/NoSearchResults.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},46311:(e,t,n)=>{n.d(t,{w:()=>d});var a,r=n(67294),s=n(29233),o=n(74673),i=n(23991),l=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,u,d=(0,r.memo)((function(e){var t=e.title,n=e.description,a=e.media,r=e.onPress,c=e.testID;return(0,l.jsx)(o.Pressable,{backgroundColor:"background",as:"button",noScaleOnPress:!0,onPress:r,testID:c,children:(0,l.jsx)(s.ListCell,{title:(0,l.jsx)(i.TextBody,{as:"p",children:t}),description:(0,l.jsx)(i.TextLabel2,{as:"p",color:"foregroundMuted",children:n}),media:a})})}));(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(d,"SearchSuggestionCell","/workspaces/apps/extension/src/components/SearchSuggestionsList/SearchSuggestionCell.tsx"),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},68590:(e,t,n)=>{n.d(t,{U:()=>g});var a,r=n(67294),s=n(86138),o=n(6585),i=n(23991),l=n(70483),c=n(46311),u=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var d,p,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},g=(0,r.memo)(f((function(e){var t=e.suggestions,n=e.title,a=e.handleSuggestionClick,d=e.searchQuery,p=e.noSearchResultsMessage,f=e.upsellcomponent,g=(0,s.n)().isSuggestionsEnabled,b=(0,r.useCallback)((function(e){return function(){return null==a?void 0:a(e)}}),[a]),m=(0,r.useMemo)((function(){return g||0!==(null==d?void 0:d.length)?0===t.length?(0,u.jsx)(l.q,{noSearchResultsMessage:p}):t.map((function(e,t){var n=e.title,a=e.description,r=e.media,s=e.item,o=e.key;return(0,u.jsx)(c.w,{title:n,description:a,onPress:b(s),media:r,testID:"suggestion-item"},o+t.toString())})):f}),[b,g,p,null==d?void 0:d.length,t,f]);return(0,u.jsxs)(o.VStack,{height:"100%",overflow:"scroll",testID:"suggestions-list",children:[n?(0,u.jsx)(i.TextLabel1,{as:"span",color:"foreground",spacing:3,spacingBottom:1,children:n}):null,m]})}),"useIsENSAndUsernameSendEnabled{{ isSuggestionsEnabled }}\nuseCallback{handlePress}\nuseMemo{suggestionListComponent}",(function(){return[s.n]})));(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(g,"SearchSuggestionsList","/workspaces/apps/extension/src/components/SearchSuggestionsList/SearchSuggestionsList.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},58243:(e,t,n)=>{n.d(t,{I:()=>y});var a,r=n(67294),s=n(25387),o=n(86896),i=n(17969),l=n(22558),c=n(45439),u=n(75849),d=n(96092),p=n(29233),f=n(6585),g=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var b,m,S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h="send.steps.AdjustGasPresetStep",v=(0,s.vU)({title:{id:"".concat(h,".title"),defaultMessage:"Change speed",description:"Title for change speed"},fastPresetTitle:{id:"".concat(h,".fastPresetTitle"),defaultMessage:"Fast",description:"Title for fast preset"},normalPresetTitle:{id:"".concat(h,".normalPresetTitle"),defaultMessage:"Normal",description:"Title for normal preset"},slowPresetTitle:{id:"".concat(h,".slowPresetTitle"),defaultMessage:"Slow",description:"Title for slow preset"},customCellTitle:{id:"".concat(h,".customCellTitle"),defaultMessage:"Custom",description:"Title for custom cell"},fastPresetTime:{id:"".concat(h,".fastPresetTime"),defaultMessage:"~15 sec",description:"Estimated time for fast preset"},normalPresetTime:{id:"".concat(h,".normalPresetTime"),defaultMessage:"~30 sec",description:"Estimated time for normal preset"},slowPresetTime:{id:"".concat(h,".slowPresetTime"),defaultMessage:"45 sec+",description:"Estimated time for slow preset"},customCellDescription:{id:"".concat(h,".customCellDescription"),defaultMessage:"Manual Setting",description:"Description for custom cell"}});function x(){return(0,g.jsxs)(f.VStack,{spacingHorizontal:1,children:[(0,g.jsx)(p.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0}),(0,g.jsx)(p.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0}),(0,g.jsx)(p.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0})]})}function y(e){var t=e.wallet,n=e.toAddress,a=e.unsignedTx,s=e.isEntireBalance,b=e.initialGasLimit,m=e.handleGenerateTx,S=e.goBack,h=e.goToCustom,y=e.flowType,k=(0,o.Z)().formatMessage,C=(0,c.T)(b,t.network);(0,d.GT)(y);var w=(0,r.useCallback)((function(e){if(!a)return null;var r={kind:s?"EntireBalance":"Amount",value:a.transferValue};(0,u.$)({wallet:t,amount:r,recipientAddress:n,metadata:a.metadata,baseFeePerGas:e.baseFeePerGas,nonce:void 0,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,gasLimit:b,dataBuffer:a.data}).then(m)}),[m,b,s,n,a,t]),L=(0,r.useCallback)((function(e,t){return function(){switch(t){case"fast":(0,d.E0)(y);break;case"normal":(0,d.Rw)(y);break;case"slow":(0,d.F7)(y)}return w(e)}}),[y,w]);return(0,g.jsxs)(f.VStack,{height:l.UV,children:[(0,g.jsx)(i.w,{onBack:S,title:k(v.title)}),C?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.ListCell,{title:k(v.fastPresetTitle),description:k(v.fastPresetTime),detail:C.fast.fiatRangeString,subdetail:C.fast.cryptoRangeString,onPress:L(C.fast,"fast"),testID:"adjust-gas-preset-fast-cell"}),(0,g.jsx)(p.ListCell,{title:k(v.normalPresetTitle),description:k(v.normalPresetTime),detail:C.normal.fiatRangeString,subdetail:C.normal.cryptoRangeString,onPress:L(C.normal,"normal"),testID:"adjust-gas-preset-normal-cell"}),(0,g.jsx)(p.ListCell,{title:k(v.slowPresetTitle),description:k(v.slowPresetTime),detail:C.slow.fiatRangeString,subdetail:C.slow.cryptoRangeString,onPress:L(C.slow,"slow"),testID:"adjust-gas-preset-slow-cell"})]}):(0,g.jsx)(x,{}),(0,g.jsx)(p.ListCell,{title:k(v.customCellTitle),subdetail:k(v.customCellDescription),onPress:h,testID:"adjust-gas-preset-custom-cell"})]})}S(y,"useIntl{{ formatMessage }}\nuseMinerFeeEstimates{minerFees}\nuseAdjustableGasPresetScreenViewed{}\nuseCallback{generateUnsigned1559Tx}\nuseCallback{handlePressPreset}",(function(){return[o.Z,c.T,d.GT]})),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(h,"i18nKey","/workspaces/apps/extension/src/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx"),b.register(v,"messages","/workspaces/apps/extension/src/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx"),b.register(x,"Fallback","/workspaces/apps/extension/src/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx"),b.register(y,"SharedAdjustGasPresetStep","/workspaces/apps/extension/src/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},21490:(e,t,n)=>{n.r(t),n.d(t,{Send:()=>g});var a,r,s,o=n(5977),i=n(22558),l=n(34291),c=n.n(l),u=n(6585),d=n(94748),p=n(30837),f=n(85893);function g(){var e=(0,o.UO)().tokenId;return(0,f.jsx)(u.VStack,{testID:"send-wrapper",height:i.IR,children:(0,f.jsx)(d.cr.Provider,{onSubmit:c(),children:(0,f.jsx)(d.Ex.Provider,{defaultStep:e?"selectRecipient":"entry",children:(0,f.jsx)(p.v,{})})})})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(g,"useParams{{ tokenId }}",(function(){return[o.UO]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(g,"Send","/workspaces/apps/extension/src/screens/Send/Send.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},30837:(e,t,n)=>{n.d(t,{v:()=>T});var a,r,s,o=n(67294),i=n(5977),l=n(3832),c=n(51395),u=n(73107),d=n(2269),p=n(61466),f=n(79885),g=n(8491),b=n(90821),m=n(65562),S=n(77382),h=n(43823),v=n(4256),x=n(26039),y=n(76797),k=n(8474),C=n(57402),w=n(94748),L=n(85893);function T(){var e,t=(0,i.UO)(),n=t.id,a=t.tokenId,r=(0,g.Z)(w.cr),s=r.walletId,T=r.collectible,G=(0,i.UO)(),A=decodeURIComponent(G.walletId);e=(0,p.r)(s.value||A);var H=T.onChange,M=(0,f.r)(),j=(0,d.b)(),E=decodeURIComponent(n),F=decodeURIComponent(a),P=(0,o.useMemo)((function(){if(a){var e,t,n,r=null!==(e=(null!=j?j:[]).find((function(e){return e.id===E})))&&void 0!==e?e:void 0;return null!==(t=(null!==(n=null==r?void 0:r.tokens.tokenList)&&void 0!==n?n:[]).find((function(e){return e.id===F})))&&void 0!==t?t:void 0}}),[j,E,F,a]);return a&&(e=M.find((function(e){return l.$.isEqual(e.blockchain,u.t)&&c.N.isEqual(e.currencyCode,c.N.ETH)}))),(0,o.useEffect)((function(){H(P)}),[P,H]),a&&!P?null:e?(0,L.jsxs)(w.Ex.Steps,{children:[(0,L.jsx)(h.y,{wallet:e,entryPoint:G.walletId?"assetDetailBalance":"global"},"entry"),(0,L.jsx)(x.oK,{},"selectWallet"),(0,L.jsx)(v.f,{wallet:e},"selectRecipient"),(0,L.jsx)(S.A,{wallet:e},"confirmation"),(0,L.jsx)(y.i,{},"collectibleDetail"),(0,L.jsx)(m.P,{wallet:e},"adjustGasPreset"),(0,L.jsx)(b.N,{wallet:e},"adjustGasCustom"),(0,L.jsx)(k._,{},"signOnPhone"),(0,L.jsx)(C._,{wallet:e},"status")]}):null}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(T,"useParams{{ id, tokenId }}\nuseFields{{ walletId, collectible }}\nuseParams{params}\nuseSelectWallet{}\nuseWallets{wallets}\nuseCollections{collections}\nuseMemo{collectibleToSend}\nuseEffect{}",(function(){return[i.UO,g.Z,i.UO,p.r,f.r,d.b]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(T,"SendStepper","/workspaces/apps/extension/src/screens/Send/SendStepper.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},90821:(e,t,n)=>{n.d(t,{N:()=>f});var a,r,s,o=n(67294),i=n(84322),l=n(46404),c=n(94748),u=n(45439),d=n(8491),p=n(85893);function f(e){var t,n,a=e.wallet,r=(0,l.tC)(c.Ex).goBack,s=(0,d.Z)(c.cr),f=s.toAddress,g=s.cryptoAmount,b=s.transferValue,m=s.unsignedTxResult,S=s.initialGasLimit,h="EntireBalance"===(null===(t=b.value)||void 0===t?void 0:t.kind),v=(0,o.useCallback)((function(e){var t;m.onChange(e),g.onChange(null===(t=e.transaction)||void 0===t?void 0:t.transferValue),r(),r()}),[g,r,m]),x=(0,u.T)(S.value,a.network);if(!x)throw Error("Miner fees not defined");var y=(0,o.useMemo)((function(){return{gasLimit:S.value,maxFee:null==x?void 0:x.normal.maxFeePerGas,maxPriorityFee:null==x?void 0:x.normal.maxPriorityFeePerGas,baseFee:null==x?void 0:x.normal.baseFeePerGas}}),[x,S.value]);return(0,p.jsx)(i.C,{wallet:a,toAddress:f.value,unsignedTx:null===(n=m.value)||void 0===n?void 0:n.transaction,isEntireBalance:h,initialFees:y,handleGenerateTx:v,goBack:r,flowType:"send"})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useStepper{{ goBack }}\nuseFields{{ toAddress, cryptoAmount, transferValue, unsignedTxResult, initialGasLimit }}\nuseCallback{handleGenerateTx}\nuseMinerFeeEstimates{estimates}\nuseMemo{initialFees}",(function(){return[l.tC,d.Z,u.T]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(f,"AdjustGasCustomStep","/workspaces/apps/extension/src/screens/Send/steps/AdjustGasCustomStep/AdjustGasCustomStep.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},65562:(e,t,n)=>{n.d(t,{P:()=>f});var a,r,s,o=n(67294),i=n(58243),l=n(46404),c=n(94748),u=n(96092),d=n(8491),p=n(85893);function f(e){var t,n,a=e.wallet,r=(0,l.tC)(c.Ex),s=r.goBack,f=r.goToStep,g=(0,d.Z)(c.cr),b=g.toAddress,m=g.cryptoAmount,S=g.transferValue,h=g.unsignedTxResult,v=g.initialGasLimit,x="EntireBalance"===(null===(t=S.value)||void 0===t?void 0:t.kind),y="send",k=(0,o.useCallback)((function(){(0,u.Lq)(y),f("adjustGasCustom")}),[f]),C=(0,o.useCallback)((function(e){var t;h.onChange(e),m.onChange(null===(t=e.transaction)||void 0===t?void 0:t.transferValue),s()}),[m,s,h]);return(0,p.jsx)(i.I,{wallet:a,toAddress:b.value,unsignedTx:null===(n=h.value)||void 0===n?void 0:n.transaction,isEntireBalance:x,initialGasLimit:v.value,handleGenerateTx:C,goBack:s,goToCustom:k,flowType:y})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useStepper{{ goBack, goToStep }}\nuseFields{{ toAddress, cryptoAmount, transferValue, unsignedTxResult, initialGasLimit }}\nuseCallback{handlePressCustom}\nuseCallback{handleGenerateTx}",(function(){return[l.tC,d.Z]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(f,"AdjustGasPresetStep","/workspaces/apps/extension/src/screens/Send/steps/AdjustGasPresetStep/AdjustGasPresetStep.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},77382:(e,t,n)=>{n.d(t,{A:()=>D});var a,r=n(67294),s=n(25387),o=n(86896),i=n(5977),l=n(54419),c=n(66282),u=n(10316),d=n(80383),p=n(30628),f=n(46404),g=n(9643),b=n(50549),m=n(25444),S=n(15064),h=n(22196),v=n(94748),x=n(83208),y=n(76656),k=n(27025),C=n(30103),w=n(74088),L=n(96092),T=n(8491),G=n(9943),A=n(6585),H=n(74673),M=n(23991),j=n(40032),E=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var F,P,I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},R={network:"",total:"",amount:"",isFiat:!1},B="send.ConfirmationStep",N=(0,s.vU)({title:{id:"".concat(B,".title"),defaultMessage:"Confirm send",description:"page title"},sendButton:{id:"".concat(B,".sendButton"),defaultMessage:"Send",description:"send button"},cancelButton:{id:"".concat(B,".cancelButton"),defaultMessage:"Cancel",description:"cancel button"}});function D(e){var t,n,a,s=e.wallet,F=(0,o.Z)().formatMessage,P=(0,f.tC)(v.Ex),I=P.goToStep,B=P.goBack,D=(0,i.k6)(),V=(0,T.Z)(v.cr),U=V.toAddress,O=V.cryptoAmount,Z=V.unsignedTxResult,W=V.txSigningError,q=V.signedTx,_=V.searchQuery,z=V.destinationType,$=(0,g.z)(),Q=(0,k.$)(),K=Z.value,Y=(0,h.aT)(),X=(0,h.MD)(),J=(0,r.useContext)(S.kH).setShowNavigation,ee=W.onChange,te=(0,r.useCallback)((function(e){ee(e),I("status")}),[I,ee]),ne=(0,r.useCallback)((function(e){q.onChange(e),I("status")}),[I,q]),ae=(0,w.O)(null==K||null===(t=K.transaction)||void 0===t?void 0:t.blockchain,null==K||null===(n=K.transaction)||void 0===n?void 0:n.feeCurrencyCode,null==K||null===(a=K.transaction)||void 0===a?void 0:a.network);if(!ae)throw new Error("Something went wrong in ConfirmationStep");var re=(0,m.Q)({wallet:s,unsignedTx:K.transaction,signSuccess:ne,signError:te}),se=re.signAndSubmitStandalone,oe=re.isSignAndSubmitStandaloneLoading;(0,h.M4)();var ie=(0,r.useMemo)((function(){return(0,p.F)(s.network)}),[s.network]),le=(0,C.N)("adjustable_miner_fee"),ce=$&&ie&&(!(0,y.B)()||le),ue=(0,r.useMemo)((function(){if(null==K||!K.transaction)return R;if(ie){var e=K.transaction,t=e.feeCurrencyCode,n=e.feeCurrencyDecimal,a=e.currencyCode,r=e.lowerBoundFee,o=e.upperBoundFee,i=e.transferValue||O.value,l=Q.formatToFiatTotalRange({feeCurrencyCode:t,currencyCode:a,contractAddress:s.contractAddress,network:s.network,fee:o,lowerBoundFee:r,amount:i,isConfirmed:!1,decimals:s.decimals,includeFee:!0,feeDecimals:n}),c=Q.formatToFiat(a,s.decimals,i,!1,s.contractAddress,s.network),u=Q.formatToFiatFeeRange(t,n,o,!1,r,s.network),d=Q.formatToCrypto({currencyCode:a,decimals:s.decimals,value:i,network:s.network}),p=Q.formatToCryptoRange(t,n,r,o);return u&&c&&l?{amount:c,network:u,total:l,isFiat:!0}:(u||p)&&d?{amount:d,network:null!=u?u:p,total:"",isFiat:!1}:R}var f=K.transaction,g=f.feeCurrencyCode,b=f.feeCurrencyDecimal,m=f.currencyCode,S=f.estimatedFee,h=f.transferValue||O.value,v=Q.formatToFiatTotalRange({feeCurrencyCode:g,currencyCode:m,contractAddress:s.contractAddress,network:s.network,fee:S,lowerBoundFee:void 0,amount:h,isConfirmed:!1,decimals:s.decimals,includeFee:!0,feeDecimals:b}),x=Q.formatToFiat(m,s.decimals,h,!1,s.contractAddress,s.network),y=Q.formatToFiat(g,b,S,!1,void 0,s.network),k=Q.formatToCrypto({currencyCode:m,decimals:s.decimals,value:h,network:s.network}),C=Q.formatToCrypto({currencyCode:g,decimals:b,value:S,network:s.network}),w="".concat(y," \u2022 ").concat(C);return w&&x&&v?{amount:x,network:w,total:v,isFiat:!0}:(y||C)&&k?{amount:k,network:null!=y?y:C,total:"",isFiat:!1}:R}),[null==K?void 0:K.transaction,ie,O.value,Q,s.contractAddress,s.network,s.decimals]),de=(0,b.W)((function(e){return Y(),e&&e.unsubscribe(),$?se():(I("signOnPhone"),null)}),[Y,$,se,I]),pe=(0,r.useCallback)((function(){X(),J(!0),D.goBack()}),[D,J,X]),fe=(0,u.o)({wallet:s,unsignedTx:null==K?void 0:K.transaction,feeWallet:ae}),ge=(0,r.useMemo)((function(){return[{children:F(N.cancelButton),variant:"secondary",onPress:pe},{children:F(N.sendButton),variant:null!=fe&&fe.isDisabled?"secondary":"primary",disabled:oe||(null==fe?void 0:fe.isDisabled),loading:oe,onPress:de,testID:"send-confirm-button"}]}),[F,pe,de,oe,null==fe?void 0:fe.isDisabled]),be=(0,r.useCallback)((function(){(0,L.U2)(),I("adjustGasPreset")}),[I]),me=(0,r.useMemo)((function(){return ce?(0,E.jsx)(H.Pressable,{as:"button",testID:"send-confirmation-adjustable-gas-entry",onPress:be,backgroundColor:"transparent",children:(0,E.jsx)(G.Icon,{name:"gear",size:"s",color:"foreground",spacingStart:1})}):null}),[ce,be]),Se={transactionCost:ue,wallet:s,AdjustGasPresetAction:me},he=(0,j.D)(Se),ve=(0,r.useMemo)((function(){return{testID:"primaryItem",title:s.displayName,iconSource:s,detail:ue.isFiat?ue.amount:"",subDetail:(0,x.dN)(Q,s,O.value,!0,!0),isAsset:!0}}),[O.value,Q,ue.amount,ue.isFiat,s]),xe=(0,r.useMemo)((function(){var e=(0,d.ro)(U.value,6,4);return z.value&&"address"!==z.value?(0,E.jsxs)(A.VStack,{children:[(0,E.jsx)(M.TextHeadline,{as:"p",spacingStart:1,tabIndex:0,children:_.value}),(0,E.jsx)(M.TextBody,{as:"p",color:"foregroundMuted",spacingStart:1,tabIndex:0,children:e})]}):e}),[_.value,U.value,z.value]),ye=(0,r.useMemo)((function(){return{testID:"secondaryItem",title:xe,iconSource:"wallet",isAsset:!1}}),[xe]),ke=(0,r.useCallback)((function(){B(),J(!0)}),[B,J]);return(0,E.jsx)(c.q,{headerText:F(N.title),topSection:(0,E.jsx)(l.v,{primaryItem:ve,secondaryItem:ye}),detailRowItems:he,error:fe,options:ge,handleBackButton:ke})}I(D,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep, goBack: goBackOneStep }}\nuseHistory{history}\nuseFields{{\n    toAddress,\n    cryptoAmount,\n    unsignedTxResult,\n    txSigningError,\n    signedTx,\n    searchQuery,\n    destinationType,\n  }}\nuseIsStandalone{isStandalone}\nuseCurrencyFormatter{currencyFormatter}\nuseSendConfirmationSendClicked{triggerAnalyticsSendClicked}\nuseSendConfirmationCancelClicked{triggerAnalyticsCancelClicked}\nuseContext{{ setShowNavigation }}\nuseCallback{signError}\nuseCallback{signSuccess}\nuseWallet{feeWallet}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseSendConfirmationViewed{}\nuseMemo{is1559Enabled}\nuseIsFeatureEnabled{adjustableGasFlagEnabled}\nuseMemo{transactionCost}\nuseObservableCallback{handleOnSend}\nuseCallback{handleOnCancel}\nuseTransactionDetailsErrors{transactionDetailsErrors}\nuseMemo{buttonOptions: ButtonProps[]}\nuseCallback{openAdjustableGasPreset}\nuseMemo{AdjustGasPresetAction}\nuseTransactionDetailRowItems{detailRows}\nuseMemo{primaryItemProps}\nuseMemo{destination}\nuseMemo{secondaryItemProps}\nuseCallback{goBack}",(function(){return[o.Z,f.tC,i.k6,T.Z,g.z,k.$,h.aT,h.MD,w.O,m.Q,h.M4,C.N,b.W,u.o,j.D]})),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(F.register(R,"emptyTransactionCost","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/ConfirmationStep.tsx"),F.register(B,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/ConfirmationStep.tsx"),F.register(N,"messages","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/ConfirmationStep.tsx"),F.register(D,"ConfirmationStep","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/ConfirmationStep.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},40032:(e,t,n)=>{n.d(t,{D:()=>g});var a,r=n(25387),s=n(86896),o=n(80383),i=n(60417),l=n.n(i);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var c,u,d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p="send.ConfirmationStep.useTransactionDetailsRowItems",f=(0,r.vU)({walletUsedLabel:{id:"".concat(p,".walletUsedLabel"),defaultMessage:"Wallet used",description:"Label for transaction detail row displaying the wallet hash"},walletNetworkLabel:{id:"".concat(p,".walletNetworkLabel"),defaultMessage:"Network",description:"Label for transaction detail row displaying the current network"},networkFeeLabel:{id:"".concat(p,".networkFeeLabel"),defaultMessage:"Network fee",description:"Label for transaction detail row displaying the network fee"},networkFeeTooltip:{id:"".concat(p,".networkFeeTooltip"),defaultMessage:"Applies to all transactions. Not paid to Coinbase.",description:"Tooltip explaining the network fee"},transactionSpeedLabel:{id:"".concat(p,".transactionSpeedLabel"),defaultMessage:"Transaction speed",description:"Label for transaction detail row displaying the coinbase fee"},totalCostLabel:{id:"".concat(p,".totalCostLabel"),defaultMessage:"Total cost",description:"Label for transaction detail row displaying the coinbase fee"}});function g(e){var t=(0,s.Z)().formatMessage,n=e.wallet.network.asChain();return l()([{label:t(f.walletUsedLabel),detailText:(0,o.ro)(e.wallet.primaryAddress,6,4),testID:"send-confirmation-wallet-used-label"},n?{label:t(f.walletNetworkLabel),detailText:n.displayName,testID:"send-confirmation-wallet-network-label"}:null,{label:t(f.networkFeeLabel),detailText:e.transactionCost.network,testID:"send-confirmation-network-fee-label",tooltipText:t(f.networkFeeTooltip),actionIcon:e.AdjustGasPresetAction},e.transactionCost.total&&{label:t(f.totalCostLabel),detailText:e.transactionCost.total,testID:"send-confirmation-total-cost-label"}])}d(g,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(p,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/hooks/useTransactionDetailRowItems.tsx"),c.register(f,"messages","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/hooks/useTransactionDetailRowItems.tsx"),c.register(g,"useTransactionDetailRowItems","/workspaces/apps/extension/src/screens/Send/steps/ConfirmationStep/hooks/useTransactionDetailRowItems.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},52726:(e,t,n)=>{n.d(t,{G:()=>h});var a,r=n(67294),s=n(68839),o=n(46404),i=n(67051),l=n(22196),c=n(94748),u=n(9943),d=n(13792),p=n(96348),f=n(85558),g=n(40616),b=n(5582),m=n(23991),S=n(85893);function h(e){var t=e.wallet,n=(0,o.tC)(c.Ex).goToStep,a=(0,l.ju)(),i=(0,r.useCallback)((function(){a(),n("selectWallet")}),[n,a]);return(0,S.jsx)(g.VStack,{children:(0,S.jsx)(b.PressableOpacity,{as:"button",noScaleOnPress:!0,onPress:i,testID:"send-asset-selector",children:(0,S.jsx)(d.Box,{spacingVertical:3,children:(0,S.jsx)(p.Card,{spacingHorizontal:2,spacingVertical:1,width:"100%",children:(0,S.jsxs)(f.HStack,{justifyContent:"space-between",children:[(0,S.jsxs)(f.HStack,{alignItems:"center",children:[(0,S.jsx)(s.Y,{asset:t,spacingEnd:2}),(0,S.jsx)(y,{children:(0,S.jsx)(m.TextBody,{as:"div",color:"foreground",title:t.displayName,children:t.displayName})})]}),(0,S.jsx)(d.Box,{width:"105px",justifyContent:"flex-end",height:40,alignItems:"center",children:(0,S.jsx)(u.Icon,{name:"sortDownCenter",size:"m",color:"foreground"})})]})})})})})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(h,"useStepper{{\n    goToStep\n  }}\nuseSendWalletSectorClicked{triggerAnalyticsWalletSelectorClicked}\nuseCallback{handleOnPress}",(function(){return[o.tC,l.ju]}));var v,x,y=(0,i.Z)("div")({name:"AssetName",class:"ajs03ox"});n(36300),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(h,"AssetSelector","/workspaces/apps/extension/src/screens/Send/steps/EntryStep/AssetSelector.tsx"),v.register(y,"AssetName","/workspaces/apps/extension/src/screens/Send/steps/EntryStep/AssetSelector.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},43823:(e,t,n)=>{n.d(t,{y:()=>j});var a,r=n(67294),s=n(25387),o=n(86896),i=n(5977),l=n(7712),c=n(17969),u=n(46404),d=n(62214),p=n(22196),f=n(94748),g=n(22558),b=n(27025),m=n(8491),S=n(47393),h=n(8975),v=n(40616),x=n(20659),y=n(77060),k=n(52726),C=n(85893);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var T,G,A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H="send.steps.EntryStep",M=(0,s.vU)({title:{id:"".concat(H,".title"),defaultMessage:"Send {displayName}",description:"Title for send crypto amount screen"},nextCTALabel:{id:"".concat(H,".nextCTALabel"),defaultMessage:"Next",description:"Label for button CTA label to move to next step in send crypto flow"},fiatAmountAvailable:{id:"".concat(H,".fiatAmountAvailable"),defaultMessage:"{maxFiat} available",description:"Label for displying how much is available to send in fiat value"},noAmountError:{id:"".concat(H,".noAmountError"),defaultMessage:"Please enter an amount.",description:"Message to be displayed when there is no amount added and the user press confirm button"}});function j(e){var t=e.wallet,n=e.entryPoint,a=w((0,r.useState)(!1),2),s=a[0],L=a[1],T=(0,i.k6)(),G=(0,o.Z)().formatMessage,A=(0,u.tC)(f.Ex).goToStep,H=(0,m.Z)(f.cr),j=H.walletId,E=H.cryptoAmount,F=H.transferValue,P=(0,b.$)(),I=(0,p.j$)(),R=(0,p.Kd)(),B=(0,p.$E)(),N=(0,p.BU)();(0,p.VA)(n),(0,d.F)((function(){j.onChange(t.id)}));var D=(0,r.useMemo)((function(){return P.formatToFiat(t.currencyCode,t.decimals,t.balance,!1,t.contractAddress,t.network)||""}),[P,t.currencyCode,t.decimals,t.balance,t.contractAddress,t.network]),V=s||0n===E.value,U=(0,r.useMemo)((function(){return(0,C.jsxs)(v.VStack,{alignContent:"center",justifyContent:"center",children:[(0,C.jsx)(x.TextHeadline,{as:"h2",align:"center",children:G(M.title,{displayName:t.displayName})}),D?(0,C.jsx)(y.TextLabel2,{as:"span",color:"foregroundMuted",align:"center",children:G(M.fiatAmountAvailable,{maxFiat:D})}):null]})}),[D,t,G]),O=(0,r.useCallback)((function(){I();var e={kind:E.value===t.balance?"EntireBalance":"Amount",value:E.value};F.onChange(e),A("selectRecipient")}),[E.value,A,F,I,t.balance]),Z=(0,r.useCallback)((function(){R(),null==T||T.goBack()}),[T,R]);return(0,C.jsxs)(v.VStack,{height:g.UV,justifyContent:"space-between",children:[(0,C.jsx)(c.w,{onBack:Z,title:U}),(0,C.jsxs)(v.VStack,{spacingHorizontal:3,children:[(0,C.jsx)(l._Z,{context:"send",wallet:t,onInsufficentFund:L,cryptoAmount:E,analyticsGetMaxValue:B,analyticsSwitchDisplay:N}),(0,C.jsx)(h.Spacer,{})]}),(0,C.jsxs)(v.VStack,{spacing:3,children:[(0,C.jsx)(k.G,{wallet:t}),(0,C.jsx)(S.Button,{block:!0,disabled:V,onPress:O,testID:"send-entry-button",children:G(M.nextCTALabel)})]})]})}A(j,"useState{[hasInsufficientFund, setHasInsufficientFund](false)}\nuseHistory{history}\nuseIntl{{ formatMessage }}\nuseStepper{{ goToStep }}\nuseFields{{ walletId, cryptoAmount, transferValue }}\nuseCurrencyFormatter{currencyFormatter}\nuseSendEntryNextClicked{triggerAnalyticsEntryNextClicked}\nuseSendEntryBackClicked{triggerAnalyticsEntryBackClicked}\nuseEntryGetMaxValueButton{triggerAnalyticsGetMaxValue}\nuseEntrySwitchDisplayButton{triggerAnalyticsSwitchDisplay}\nuseSendEntryViewed{}\nuseOnMount{}\nuseMemo{maxFiat}\nuseMemo{title}\nuseCallback{handleNextClicked}\nuseCallback{handleBackClicked}",(function(){return[i.k6,o.Z,u.tC,m.Z,b.$,p.j$,p.Kd,p.$E,p.BU,p.VA,d.F]})),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(H,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/EntryStep/EntryStep.tsx"),T.register(M,"messages","/workspaces/apps/extension/src/screens/Send/steps/EntryStep/EntryStep.tsx"),T.register(j,"EntryStep","/workspaces/apps/extension/src/screens/Send/steps/EntryStep/EntryStep.tsx")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)},26614:(e,t,n)=>{n.d(t,{s:()=>u});var a,r=n(9943),s=n(6585),o=n(19692),i=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var l,c;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function u(e){var t=e.type;return(0,i.jsx)(s.Box,{alignItems:"center",justifyContent:"center",height:32,width:32,borderRadius:"round",dangerouslySetBackground:o.palette.foregroundMuted,children:(0,i.jsx)(r.Icon,{name:"wallet_username"===t?"profile":"wallet",size:"s",color:"primaryForeground"})})}(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(u,"DestinationIcon","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/DestinationIcon.tsx"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},4256:(e,t,n)=>{n.d(t,{f:()=>re});var a=n(67294),r=n(25387),s=n(86896),o=n(5977),i=n(17969),l=n(69869),c=n(68590),u=n(30628),d=n(73107),p=n(43620),f=n(46404),g=n(54514),b=n(31317),m=n(50549),S=n(62214),h=n(15064),v=n(22196),x=n(94748),y=n(86138),k=n(22558),C=n(70068);const w=(e,t)=>"address"===t?(0,C.n)(e):e;var L=n(12914),T=n(81804),G=n(54073),A=n.n(G),H=n(49602),M=n(95978),j=n(72045),E=n(61220),F=n(8503),P=n(37497);const I=async({wallet:e,amount:t,recipientAddress:n,metadata:a,gasPrice:r,gasLimit:s})=>{const o={start:F.F.txGenerationStart,success:F.F.txGenerationSuccess,fail:F.F.txGenerationFail,data:{loggingId:"317dbef1-e3c9-463c-b3a0-56505ae43c84",action:E.ActionType.unknown,componentType:E.ComponentType.unknown,isMax:"EntireBalance"===t.kind,uuid:(0,j.Z)(),currency_code:e.currencyCode.rawValue,type:"legacy"}};return(0,M.A)((async()=>(0,P.bv)(e.blockchain).generateUnsignedTx(e,t,n,a,r,s)),o)};var R=n(75849);var B=n(8491),N=n(47393),D=n(13792),V=n(40616),U=n(23991),O=n(95368),Z=n(26614),W=n(85893);e=n.hmd(e);var q,_=n(48764).Buffer;function z(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){z(s,a,r,o,i,"next",e)}function i(e){z(s,a,r,o,i,"throw",e)}o(void 0)}))}}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&q(e);var Y,X,J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ee="send.steps.SelectRecipientStep",te=(0,r.vU)({title:{id:"".concat(ee,".title"),defaultMessage:"Choose recipient",description:"Title for choose recipient page"},sendToLabel:{id:"".concat(ee,".sendToLabel"),defaultMessage:"Send to",description:"Label describing asset recipient input form"},pasteFromClipboardLabel:{id:"".concat(ee,".pasteFromClipboard"),defaultMessage:"Paste From Clipboard",description:"Label for button to paste address from clipboard"},notValidETHAddressLabel:{id:"".concat(ee,".notValidETHAddressLabel"),defaultMessage:"Not a valid Ethereum address",description:"Label describing entered ETH address is not valid"},nextCTALabel:{id:"".concat(ee,".nextCTALabel"),defaultMessage:"Next",description:"Label for button CTA label to move to next step in send crypto flow"},suggestedAddressLabel:{id:"".concat(ee,".suggestedAddressLabel"),defaultMessage:"Suggested",description:"Label suggesting most recently used send addresses"},recentlySentToThisAddress:{id:"".concat(ee,".recentlySentToThisAddress"),defaultMessage:"sent to this address {duration} ago",description:"Label text to show that this recipient entry was used in a recent send"},recipientNonExistent:{id:"".concat(ee,".recipientNonExistent"),defaultMessage:"This recipient either doesn't exist or is set to private",description:"Lets the user know that the recipient does not exist"},noResults:{id:"".concat(ee,".noResults"),defaultMessage:"No results",description:"Message to let the user know that no search results were found for their query"},authenticationRequestUpsell:{id:"".concat(ee,".authenticationRequestUpsell"),defaultMessage:"Want to view all of your recent addresses?",description:"Upsell message to users who haven't approved authentication request to gain suggestion search results"},authenticationRequestBtnText:{id:"".concat(ee,".authenticationRequestBtnText"),defaultMessage:"Sync using your Coinbase Wallet mobile app",description:"Message to trigger Authentication request"}});function ne(e){var t=e.hasError,n=e.handleInput,a=(0,s.Z)().formatMessage;return(0,W.jsxs)(V.VStack,{spacingHorizontal:3,children:[(0,W.jsx)(U.TextLabel1,{as:"span",color:t?"negative":"primary",spacingBottom:.5,testID:"send-to-label",children:a(te.sendToLabel)}),(0,W.jsx)(l.z,{handleInput:n,hasError:t,testID:"address-textarea",autoFocus:!0}),t?(0,W.jsx)(U.TextLabel2,{as:"span",color:"foregroundMuted",spacingTop:.5,testID:"address-error-label",children:a(te.notValidETHAddressLabel)}):null]})}function ae(e){var t=e.handlePress,n=e.isDisabled,a=e.isLoading,r=(0,s.Z)().formatMessage;return(0,W.jsx)(D.Box,{spacing:3,spacingTop:1,children:(0,W.jsx)(N.Button,{block:!0,onPress:t,disabled:n,loading:a,testID:"confirm-tx-button",children:r(te.nextCTALabel)})})}function re(e){var t=e.wallet,n=(0,o.k6)(),r=(0,g.Z)(),l=(0,s.Z)().formatMessage,C=(0,B.Z)(x.cr),G=C.cryptoAmount,M=C.toAddress,j=C.transferValue,E=C.unsignedTxResult,F=C.initialGasLimit,N=C.searchQuery,D=C.destinationType,q=C.collectible,z=(0,f.tC)(x.Ex),K=z.goToStep,Y=z.goBack,X=M.onChange,J=N.onChange,ee=E.onChange,re=D.onChange,se=Q((0,a.useState)(!1),2),oe=se[0],ie=se[1],le=Q((0,a.useState)([]),2),ce=le[0],ue=le[1],de=Q((0,a.useState)(!1),2),pe=de[0],fe=de[1],ge=Q((0,a.useState)(!1),2),be=ge[0],me=ge[1],Se=(0,a.useContext)(h.kH).setShowNavigation,he=(0,v.gV)(),ve=(0,y.n)(),xe=ve.isEnabled,ye=ve.isSuggestionsEnabled;(0,v.s5)();var ke=(0,a.useCallback)((function(e){var t=e.label,n=e.type,a=e.suggestion;return{title:w(t,n),description:a?l(te.recentlySentToThisAddress,{duration:(0,L.Z)((0,T.Z)(null==a?void 0:a.lastSentAt))}):"",media:(0,W.jsx)(Z.s,{type:n}),key:t,item:e,type:n}}),[l]);(0,S.F)((function(){if(ye){X(""),J("");var e=r.searchDestinationWithSuggestions("",t).subscribe((function(e){ue(e.map(ke))}));return function(){null==e||e.unsubscribe()}}}));var Ce=(0,a.useCallback)(function(){var e=$(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return ie(!1),me(!1),e.abrupt("return",null);case 4:r=d.t,s=t.network,o=n,a=(0,P.bv)(r).isValidAddress(o,s),fe(!a),ie(a),me(!1);case 8:case"end":return e.stop()}var r,s,o}),e)})));return function(t){return e.apply(this,arguments)}}(),[t.network]),we=(0,a.useCallback)(A()(function(){var e=$(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ce(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),250),[Ce]),Le=(0,m.W)((function(e,n){return e&&e.unsubscribe(),r[ye?"searchDestinationWithSuggestions":"searchDestination"](n,t).subscribe((function(e){ue(e.map(ke));var t=0===e.length&&n.length>24;fe(t);var a=1===e.length&&"address"===e[0].type;ie(a),me(!1)}),(function(){fe(!0),ie(!1),me(!1)}))}),[ye,r,t,ke]),Te=(0,a.useCallback)(A()(Le,250),[Le]),Ge=(0,a.useCallback)((function(){Te("")}),[Te]),Ae=(0,b.G)(Ge),He=(0,a.useCallback)((function(e){ue([]);var t=e.target.value;me(!0),X(t),me(!0),fe(!1),xe?Te(t):we(t)}),[X,xe,we,Te]),Me=(0,a.useCallback)(function(){var e=$(regeneratorRuntime.mark((function e(n){var a,r,s,o,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.is1559Transaction,r=n.address,s=r||M.value,o=new Map([[p.Z,"send"]]),j.value){e.next=5;break}throw new Error("SelectRecipientStep generateUnsignedTx failed due to missing TransferValue.");case 5:if(!a){e.next=17;break}return e.next=8,(0,R.$)({wallet:t,amount:j.value,recipientAddress:s,metadata:o});case 8:if((i=e.sent).transaction){e.next=11;break}throw new Error("Generating unsigned 1559 tx failed.");case 11:ee(i),F.onChange(i.transaction.gasLimit),G.onChange(i.transaction.transferValue),K("confirmation"),e.next=24;break;case 17:return e.next=19,I({wallet:t,amount:j.value,recipientAddress:s,metadata:o});case 19:if((l=e.sent).transaction){e.next=22;break}throw new Error("Generating unsigned legacy tx failed.");case 22:ee(l),K("confirmation");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[G,ee,K,F,M.value,j.value,t]),je=(0,a.useCallback)(function(){var e=$(regeneratorRuntime.mark((function e(n){var a,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.txParamList&&0!==n.txParamList.length){e.next=2;break}throw new Error("SelectRecipientStep generateUnsignedTx failed due to missing TransferValue.");case 2:return a=n.txParamList[0],r=new Map([[p.t,a.sendNFTId],[p.Z,"sendNft"]]),s={kind:"Amount",value:BigInt(0)},e.next=7,(0,R.$)({wallet:t,amount:s,recipientAddress:a.toAddress,metadata:r,baseFeePerGas:a.gasBaseFee,maxFeePerGas:a.gasPrice,maxPriorityFeePerGas:a.gasPriorityFee,gasLimit:a.gasLimit,dataBuffer:_.from(a.data,"base64")});case 7:if((o=e.sent).transaction){e.next=10;break}throw new Error("Generating unsigned 1559 tx failed.");case 10:ee(o),F.onChange(o.transaction.gasLimit),G.onChange(o.transaction.transferValue),K("confirmation");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[G,ee,K,F,t]),Ee=(0,a.useCallback)(function(){var e=$(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=q&&q.value&&(0,H.Ay)(q.value.contractAddress,q.value.tokenId,n||M.value,t.primaryAddress,q.value.tokenType).then((function(e){je(e)})).catch((function(e){throw me(!1),Se(!0),new Error("SelectRecipientStep generateNFTUnsignedTx failed.")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[je,t,q,M,Se]),Fe=(0,a.useCallback)((function(e,n,a){he(),Se(!1);var r=null!=a?a:M.value;J(r),me(!0);var s=(0,u.F)(t.network);null!=q&&q.value?Ee(n):Me({is1559Transaction:s,address:n})}),[J,Me,Se,M.value,he,t.network,q,Ee]),Pe=(0,m.W)((function(e,n){return e&&e.unsubscribe(),r.resolveDestination(n,t).subscribe((function(e){e&&(X(e.address),Fe(void 0,e.address,n))}))}),[r,t,X,Fe]),Ie=(0,a.useCallback)((function(e){return re(e.type),Pe(e.label)}),[re,Pe]),Re=0===ce.length&&M.value.length>=3&&!be,Be=(0,a.useCallback)((function(){Se(!0),null!=q&&q.value?n.goBack():Y()}),[Y,Se,q,n]),Ne=(0,a.useCallback)((function(){me(!0),Ae()}),[Ae]),De=(0,a.useMemo)((function(){return(0,W.jsxs)(V.VStack,{spacing:3,spacingBottom:1,alignItems:"flex-start",children:[(0,W.jsx)(U.TextLabel2,{as:"span",children:l(te.authenticationRequestUpsell)}),(0,W.jsx)(O.Link,{variant:"label1",onPress:Ne,testID:"send-authentication-request-upsell-btn",children:l(te.authenticationRequestBtnText)})]})}),[l,Ne]),Ve=(0,a.useMemo)((function(){return!M.value&&ye&&0!==ce.length?l(te.suggestedAddressLabel):null}),[l,ye,ce.length,M.value]),Ue=(0,a.useMemo)((function(){return Re?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(U.TextHeadline,{as:"p",children:l(te.noResults)}),(0,W.jsx)(U.TextLabel2,{as:"p",align:"center",color:"foregroundMuted",spacingTop:1,children:l(te.recipientNonExistent)})]}):null}),[l,Re]);return(0,W.jsxs)(V.VStack,{height:k.UV,children:[(0,W.jsx)(i.w,{onBack:Be,title:l(te.title)}),(0,W.jsxs)(V.VStack,{alignContent:"center",minHeight:"370",children:[(0,W.jsx)(ne,{hasError:pe,handleInput:He}),xe?(0,W.jsx)(c.U,{suggestions:ce,title:Ve,handleSuggestionClick:Ie,searchQuery:M.value,noSearchResultsMessage:Ue,upsellcomponent:De}):null]}),xe?(0,W.jsx)(V.VStack,{borderedTop:!0,spacingTop:1,children:(0,W.jsx)(ae,{handlePress:Fe,isDisabled:!oe,isLoading:be})}):(0,W.jsx)(ae,{handlePress:Fe,isDisabled:!oe,isLoading:be})]})}J(ne,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),J(ae,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),J(re,"useHistory{history}\nuseRecipientRepository{recipientRepository}\nuseIntl{{ formatMessage }}\nuseFields{{\n    cryptoAmount,\n    toAddress,\n    transferValue,\n    unsignedTxResult,\n    initialGasLimit,\n    searchQuery,\n    destinationType,\n    collectible,\n  }}\nuseStepper{{ goToStep, goBack: goBackOneStep }}\nuseState{[validToAddress, setValidToAddress](false)}\nuseState{[suggestedSearchResults, setSuggestedSearchResults]([])}\nuseState{[hasError, setHasError](false)}\nuseState{[isLoading, setIsLoading](false)}\nuseContext{{ setShowNavigation }}\nuseSendSelectRecipientNextClicked{triggerAnalyticsSelectRecipientNextClicked}\nuseIsENSAndUsernameSendEnabled{{ isEnabled: showENSAndUsernameUI, isSuggestionsEnabled }}\nuseSendSelectRecipientViewed{}\nuseCallback{formatSearchResult}\nuseOnMount{}\nuseCallback{validateToAddress}\nuseCallback{debouncedValidateToAddress}\nuseObservableCallback{searchDestination}\nuseCallback{debouncedSearchDestination}\nuseCallback{handleAuthRequestCompleted}\nuseTriggerAuthenticationRequest{triggerAuthorizationRequestMessage}\nuseCallback{handleAddressInputChange}\nuseCallback{generateUnsignedTx}\nuseCallback{generateNFTUnsignedTx}\nuseCallback{getCollectibleSendTxDataResponse}\nuseCallback{handleOnNext}\nuseObservableCallback{handleSuggestedDestination}\nuseCallback{handleSuggestionItemClick}\nuseCallback{goBack}\nuseCallback{handleAuthRequestBtnClicked}\nuseMemo{upsellAuthorization}\nuseMemo{suggestionListTitle}\nuseMemo{noSearchResultsMessage}",(function(){return[o.k6,g.Z,s.Z,B.Z,f.tC,v.gV,y.n,v.s5,S.F,m.W,b.G,m.W]})),(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(Y.register(ee,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/SelectRecipientStep.tsx"),Y.register(te,"messages","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/SelectRecipientStep.tsx"),Y.register(ne,"SendAddressInput","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/SelectRecipientStep.tsx"),Y.register(ae,"NextButton","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/SelectRecipientStep.tsx"),Y.register(re,"SelectRecipientStep","/workspaces/apps/extension/src/screens/Send/steps/SelectRecipientStep/SelectRecipientStep.tsx")),(X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&X(e)},26039:(e,t,n)=>{n.d(t,{oK:()=>C});var a,r=n(67294),s=n(3832),o=n(69638),i=n(51395),l=n(73107),c=n(46404),u=n(69265),d=n(22196),p=n(94748),f=n(2269),g=n(53521),b=n(79885),m=n(8491),S=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var h,v,x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function y(){var e=(0,c.tC)(p.Ex),t=e.goBack,n=e.goToStep,a=(0,m.Z)(p.cr),s=a.walletId,i=a.cryptoAmount,l=a.currentSendTab,f=(0,u.o)(),b=(0,g.I)(),h=(0,d.D7)(),v=(0,d.pZ)();(0,d.pu)();var x=(0,r.useCallback)((function(e){s.onChange(e.id),i.onChange(BigInt(0)),n("entry")}),[i,n,s]);return(0,S.jsx)(o.i,{showCryptoNFTSelector:f,testIdPrefix:"send",wallets:b,onBack:t,onSelect:x,currentTab:l.value,onChangeTab:l.onChange,analyticsSearch:v,analyticsSelect:h})}function k(){var e=(0,c.tC)(p.Ex),t=e.goBack,n=e.goToStep,a=(0,m.Z)(p.cr),g=a.collectible,h=a.walletId,v=a.cryptoAmount,x=a.currentSendTab,y=(0,u.o)(),k=(0,f.b)(),C=(0,d.ax)(),w=(0,d.Bn)();(0,d.OQ)();var L=(0,b.r)().find((function(e){return s.$.isEqual(e.blockchain,l.t)&&i.N.isEqual(e.currencyCode,i.N.ETH)})),T=(0,r.useCallback)((function(e){var t;h.onChange(null!==(t=null==L?void 0:L.id)&&void 0!==t?t:""),v.onChange(BigInt(0)),g.onChange(e),n("selectRecipient")}),[g,v,n,h,L]);return(0,S.jsx)(o.i,{showCryptoNFTSelector:y,testIdPrefix:"send",collections:k,onBack:t,onSelect:T,currentTab:x.value,onChangeTab:x.onChange,analyticsSearch:w,analyticsSelect:C})}function C(){var e=(0,m.Z)(p.cr).currentSendTab,t=(0,u.o)();return"crypto"!==e.value&&t?(0,S.jsx)(k,{}):(0,S.jsx)(y,{})}x(y,"useStepper{{ goBack, goToStep }}\nuseFields{{ walletId, cryptoAmount, currentSendTab }}\nuseHasNFTSendExperiment{hasNFTSendExperiment}\nusePortfolioWallets{wallets}\nuseSendSelectWalletWalletClicked{triggerAnalyticsWalletClicked}\nuseSendSelectWalletSearchWallet{triggerAnalyticsWalletSearched}\nuseSendSelectWalletViewed{}\nuseCallback{handleSelect}",(function(){return[c.tC,m.Z,u.o,g.I,d.D7,d.pZ,d.pu]})),x(k,"useStepper{{ goBack, goToStep }}\nuseFields{{ collectible, walletId, cryptoAmount, currentSendTab }}\nuseHasNFTSendExperiment{hasNFTSendExperiment}\nuseCollections{collections}\nuseSendSelectNFTClicked{triggerAnalyticsClicked}\nuseSendSelectNFTSearch{triggerAnalyticsSearched}\nuseSendSelectNFTViewed{}\nuseWallets{wallets}\nuseCallback{handleSelect}",(function(){return[c.tC,m.Z,u.o,f.b,d.ax,d.Bn,d.OQ,b.r]})),x(C,"useFields{{ currentSendTab }}\nuseHasNFTSendExperiment{hasNFTSendExperiment}",(function(){return[m.Z,u.o]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(y,"SelectWalletStepContent","/workspaces/apps/extension/src/screens/Send/steps/SelectSourceStep/SelectSourceStep.tsx"),h.register(k,"SelectNFTStepContent","/workspaces/apps/extension/src/screens/Send/steps/SelectSourceStep/SelectSourceStep.tsx"),h.register(C,"SelectSourceStep","/workspaces/apps/extension/src/screens/Send/steps/SelectSourceStep/SelectSourceStep.tsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},76797:(e,t,n)=>{n.d(t,{i:()=>g});var a,r,s,o=n(46404),i=n(2088),l=n(22196),c=n(94748),u=n(8491),d=n(6585),p=n(85893);function f(){return(0,p.jsx)("div",{"data-testid":"portfolio-send-collectible-detail-fallback"})}function g(){var e=(0,u.Z)(c.cr).collectible,t=(0,o.tC)(c.Ex).goBack;return(0,l.AS)(),null!=e&&e.value?(0,p.jsx)(d.VStack,{maxHeight:"615",overflow:"scroll",testID:"portfolio-send-collectible-detail",children:(0,p.jsx)(i.m,{collectible:e.value,fromSend:!0,goBack:t})}):(0,p.jsx)(f,{})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(g,"useFields{{ collectible: collectibleToSend }}\nuseStepper{{ goBack: goBackOneStep }}\nuseSendCollectibleDetailViewed{}",(function(){return[u.Z,o.tC,l.AS]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(f,"Fallback","/workspaces/apps/extension/src/screens/Send/steps/SendCollectibleDetail/SendCollectibleDetail.tsx"),r.register(g,"SendCollectibleDetail","/workspaces/apps/extension/src/screens/Send/steps/SendCollectibleDetail/SendCollectibleDetail.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},8474:(e,t,n)=>{n.d(t,{_:()=>j});var a,r=n(67294),s=n(25387),o=n(86896),i=n(15152),l=n(54534),c=n(46404),u=n(62214),d=n(94748),p=n(13958),f=n(30103),g=n(87763),b=n(14371),m=n(16809),S=n(8491),h=n(61220),v=n(23991),x=n(85893);function y(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){y(s,a,r,o,i,"next",e)}function i(e){y(s,a,r,o,i,"throw",e)}o(void 0)}))}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T="sends.steps.SignOnPhoneStep",G=(0,s.vU)({title:{id:"".concat(T,".title"),defaultMessage:"Confirm transaction",description:"Title for wallet link confirm send transaction page"},confirmOnPhone:{id:"".concat(T,".confirmOnPhone"),defaultMessage:"Confirm on phone",description:"Title to tell the user to confirm their transaction on the phone"},confirmOnPhoneDescription:{id:"".concat(T,".confirmOnPhoneDescription"),defaultMessage:"A notification was sent to your phone, confirm this transaction to continue",description:"Description text to tell the user to confirm their send transaction on their phone"},resendNotificationHelperText:{id:"".concat(T,".resendNotificationHelperText"),defaultMessage:"Don't see the notification?",description:"Helper text in case the user did not receive the notification on their phone"},stillNotSeeingYourNotificationHelperText:{id:"".concat(T,".stillNotSeeingYourNotificationHelperText"),defaultMessage:"Still don't see the notification? {reconnectWallet}",description:"Reconnect wallet instructions"},reconnectWallet:{id:"".concat(T,".reconnectWallet"),defaultMessage:"Reconnect your wallet",description:"Reconnect your wallet instructions"},resendNotification:{id:"".concat(T,".resendNotification"),defaultMessage:"Resend notification",description:"Button CTA to resend the notification to the phone"}});function A(){var e=(0,o.Z)().formatMessage,t=(0,c.tC)(d.Ex),n=t.goBack,a=t.goToStep,s=(0,g.u)(),y=(0,r.useContext)(l.z).signOut,w=(0,S.Z)(d.cr),L=w.unsignedTxResult,T=w.signedTx,A=w.txSigningError,H=w.searchQuery,M=C((0,r.useState)(0),2),j=M[0],E=M[1],F=(0,f.N)("cb_generic_sign_and_submit_desktop"),P=(0,r.useRef)(!1);(0,h.useLogEventOnMount)("send_sign_on_phone_viewed",{loggingId:"cb263104-e4a2-4212-ba5b-3c389f701545",componentType:h.ComponentType.page});var I=(0,r.useCallback)((function(e){T.onChange(e),a("status")}),[T,a]),R=(0,r.useCallback)((function(e){A.onChange(e),a("status")}),[A,a]),B=(0,r.useCallback)(k(regeneratorRuntime.mark((function e(){var t,n,a,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E((function(e){return e+1})),"Success"===(null===(t=L.value)||void 0===t?void 0:t.kind)){e.next=3;break}return e.abrupt("return",null);case 3:if(n=L.value,a=n.transaction,r=n.wallet,!(!1===b.NF.isLinked&&b.NF.selectedAddress&&b.NF.selectedAddress.length>0)){e.next=7;break}return p.Xr.next(new p.iL),e.abrupt("return",null);case 7:return o=m.Session.hash(b.NF.session.id),e.prev=8,e.next=11,s({unsignedTx:a,wallet:r,sessionIdHash:o,toUsername:H.value,useGenericMessage:F});case 11:i=e.sent,I(i),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(8),!P.current||"UserRejectedWalletLinkRequest"!==e.t0.name){e.next=20;break}return P.current=!1,e.abrupt("return");case 20:R(e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,15]])}))),[L.value,s,H.value,F,I,R]);(0,u.F)((function(){B()}));var N=(0,r.useMemo)((function(){return{onClick:(t=k(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.current=!0,e.next=3,B();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),label:e(G.resendNotification)};var t}),[e,B]),D=(0,r.useCallback)((function(){return e(G.stillNotSeeingYourNotificationHelperText,{reconnectWallet:(0,x.jsx)(v.Link,{variant:"label1",color:"foregroundMuted",onPress:y,children:e(G.reconnectWallet)})})}),[e,y]),V=(0,r.useCallback)((function(){P.current=!0,n()}),[n]);return(0,x.jsx)(i.n,{title:e(G.confirmOnPhone),description:e(G.confirmOnPhoneDescription),retryAction:N,secondaryActionLabel:e(G.resendNotificationHelperText),reconnectLabel:j>=4?D():void 0,onDismiss:V})}L(A,"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseSignAndSubmitTransactionViaWalletLink{signAndSubmitTransactionViaWalletLink}\nuseContext{{ signOut }}\nuseFields{{ unsignedTxResult, signedTx, txSigningError, searchQuery }}\nuseState{[sendRetryCount, setSendRetryCount](0)}\nuseIsFeatureEnabled{hasGenericSignAndSubmit}\nuseRef{isUserCancelled}\nuseLogEventOnMount{}\nuseCallback{onSigningSuccess}\nuseCallback{onSigningError}\nuseCallback{handleSend}\nuseOnMount{}\nuseMemo{retryActionProps}\nuseCallback{generateReconnectLabel}\nuseCallback{handleDismiss}",(function(){return[o.Z,c.tC,g.u,S.Z,f.N,h.useLogEventOnMount,u.F]}));var H,M,j=(0,r.memo)(A);(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(T,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/SignOnPhoneStep/SignOnPhoneStep.tsx"),H.register(G,"messages","/workspaces/apps/extension/src/screens/Send/steps/SignOnPhoneStep/SignOnPhoneStep.tsx"),H.register(A,"SignOnPhoneStepComponent","/workspaces/apps/extension/src/screens/Send/steps/SignOnPhoneStep/SignOnPhoneStep.tsx"),H.register(j,"SignOnPhoneStep","/workspaces/apps/extension/src/screens/Send/steps/SignOnPhoneStep/SignOnPhoneStep.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},57402:(e,t,n)=>{n.d(t,{_:()=>j});var a,r=n(67294),s=n(25387),o=n(86896),i=n(5977),l=n(7712),c=n(65276),u=n(33651),d=n(46404),p=n(54514),f=n(50549),g=n(62214),b=n(22196),m=n(94748),S=n(22558),h=n(8491),v=n(10188),x=n(6585),y=n(23991),k=n(84477),C=n(85893);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},L="send.steps.StatusStep",T=(0,s.vU)({successfullySent:{id:"".concat(L,".successfullySent"),defaultMessage:"Successfully sent",description:"Label text to tell the user they successfully sent their transaction"},sendFailed:{id:"".concat(L,".sendFailed"),defaultMessage:"Send failed",description:"Label text to let the user know that their send failed"},sendCancelled:{id:"".concat(L,".sendCancelled"),defaultMessage:"Transaction cancelled",description:"Label text to let the user know that send transaction is cancelled by the user"},pleaseTryAgain:{id:"".concat(L,".pleaseTryAgain"),defaultMessage:"Please try again",description:"Tells the user to try their crypto send again"},tryAgainBtnText:{id:"".concat(L,".tryAgainBtnText"),defaultMessage:"Try again",description:"CTA label for try again button"},goBackHomeBtnText:{id:"".concat(L,".goBackHomeBtnText"),defaultMessage:"Go back home",description:"CTA label for go back home button"},timeEstimate:{id:"".concat(L,".timeEstimate"),defaultMessage:"~{timeEstimate} for transaction to complete",description:"Tells the user that their send will take a specified amount of time to complete"},sendInitiated:{id:"".concat(L,".sendInitiated"),defaultMessage:"Send initiated",description:"Tells the user that their send has been initiated"}}),G=[c.q.CANCELLED,c.q.FAILURE];function A(e){var t=e.tryAgain,n=e.goBackHome,a=(0,o.Z)().formatMessage;return(0,C.jsxs)(x.VStack,{gap:2,spacingBottom:3,children:[(0,C.jsx)(v.Button,{onPress:t,block:!0,variant:"primary",children:a(T.tryAgainBtnText)}),(0,C.jsx)(v.Button,{onPress:n,block:!0,variant:"secondary",children:a(T.goBackHomeBtnText)})]})}w(A,"useIntl{{ formatMessage }}",(function(){return[o.Z]}));var H,M,j=(0,r.memo)(w((function(e){var t,n=e.wallet,a=(0,o.Z)(),s=a.formatMessage,v=a.formatNumber,w=(0,h.Z)(m.cr),L=w.cryptoAmount,H=w.signedTx,M=w.txSigningError,j=w.toAddress,E=w.searchQuery,F=w.destinationType,P=w.collectible,I=w.currentSendTab,R=(0,i.k6)().replace,B=(0,d.tC)(m.Ex).goToStep,N=(0,b.jS)(),D=(0,b.uP)(),V=(0,b.Wo)(),U=(0,b.Cd)(),O=(0,b.rg)(),Z=M.onChange,W=(0,p.Z)(),q=F.value,_=(0,f.W)((function(e){return e&&e.unsubscribe(),W.saveUsage({query:E.value,wallet:n,walletAddress:j.value}).subscribe({next:function(){O()},error:function(){U()}})}),[W,E.value,j.value,U,O,n]);(0,g.F)((function(){var e,t=setTimeout((function(){M.value||R("/transactions")}),5e3);return e=null!=P&&P.value?{type:q,sendType:null==I?void 0:I.value,collectionName:P.value.collectionName,tokenId:P.value.tokenId,tokenType:P.value.tokenType}:{type:q,sendType:null==I?void 0:I.value},H.value&&(N(e),_()),M.value&&(M.value===u.u.userRejectedWalletLinkRequest&&D(e),V(e)),function(){return clearTimeout(t)}}));var z=(0,r.useMemo)((function(){return H.value?c.q.SUCCESS:M.value?M.value===u.u.userRejectedWalletLinkRequest?c.q.CANCELLED:c.q.FAILURE:c.q.SUCCESS}),[H.value,M.value]),$=(0,r.useMemo)((function(){switch(z){case c.q.SUCCESS:return null!=P&&P.value?s(T.sendInitiated):s(T.successfullySent);case c.q.FAILURE:return s(T.sendFailed);case c.q.CANCELLED:return s(T.sendCancelled);default:throw new Error("got unexpected status")}}),[z,s,P]),Q=(0,r.useMemo)((function(){switch(z){case c.q.SUCCESS:return null!=P&&P.value?(0,C.jsx)(x.Box,{spacingHorizontal:3,children:(0,C.jsx)(y.TextHeadline,{as:"p",overflow:"truncate",children:"#".concat(P.value.tokenId)})}):(0,C.jsx)(l._Z,{context:"send",wallet:n,cryptoAmount:L,readOnly:!0});case c.q.FAILURE:var e;return(0,C.jsx)(k.TextBody,{as:"p",align:"center",children:(null==M||null===(e=M.value)||void 0===e?void 0:e.message)||s(T.pleaseTryAgain)});default:return null}}),[z,n,L,null==M||null===(t=M.value)||void 0===t?void 0:t.message,s,P]),K=(0,r.useMemo)((function(){return z===c.q.SUCCESS?s(T.timeEstimate,{timeEstimate:v(5,{unit:"minute",unitDisplay:"short",style:"unit"})}):""}),[z,s,v]),Y=(0,r.useCallback)((function(){Z(void 0),B("confirmation")}),[B,Z]),X=(0,r.useCallback)((function(){R("/portfolio")}),[R]);return(0,C.jsx)(c.R,{status:z,title:$,description:Q,subtext:K,height:S.IR,cta:G.includes(z)?(0,C.jsx)(A,{tryAgain:Y,goBackHome:X}):null,testID:"send-".concat(z,"-message")})}),"useIntl{{ formatMessage, formatNumber }}\nuseFields{{\n    cryptoAmount,\n    signedTx,\n    txSigningError,\n    toAddress,\n    searchQuery,\n    destinationType,\n    collectible,\n    currentSendTab,\n  }}\nuseHistory{{ replace }}\nuseStepper{{ goToStep }}\nuseSendStatusSuccessViewed{triggerSuccessViewed}\nuseSendStatusCancelledViewed{triggerCancelledViewed}\nuseSendStatusFailedViewed{triggerFailedViewed}\nuseSendSaveUsageFailed{triggerSaveUsageFailed}\nuseSendSaveUsageSuccess{triggerSaveUsageSuccess}\nuseRecipientRepository{recipientRepository}\nuseObservableCallback{saveUsage}\nuseOnMount{}\nuseMemo{status}\nuseMemo{title}\nuseMemo{description}\nuseMemo{subtext}\nuseCallback{handleTryAgain}\nuseCallback{handleGoBackhome}",(function(){return[o.Z,h.Z,i.k6,d.tC,b.jS,b.uP,b.Wo,b.Cd,b.rg,p.Z,f.W,g.F]})));(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(L,"i18nKey","/workspaces/apps/extension/src/screens/Send/steps/StatusStep/StatusStep.tsx"),H.register(T,"messages","/workspaces/apps/extension/src/screens/Send/steps/StatusStep/StatusStep.tsx"),H.register(G,"failedStatuses","/workspaces/apps/extension/src/screens/Send/steps/StatusStep/StatusStep.tsx"),H.register(A,"CancelledTxCTAButtonGroup","/workspaces/apps/extension/src/screens/Send/steps/StatusStep/StatusStep.tsx"),H.register(j,"StatusStep","/workspaces/apps/extension/src/screens/Send/steps/StatusStep/StatusStep.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},95797:(e,t,n)=>{n.r(t)},36300:(e,t,n)=>{n.r(t)},80304:(e,t,n)=>{n.d(t,{m:()=>r});var a=n(91498);const r=()=>(0,a.g)().authenticationRepository},54514:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(91498);const r=()=>(0,a.g)().recipientRepository},31317:(e,t,n)=>{n.d(t,{G:()=>c});var a=n(15325),r=n(10769),s=n(80304),o=n(50549),i=n(40486),l=n(14371);function c(e){const t=(0,s.m)();return(0,o.W)((n=>(n&&n.unsubscribe(),function(e,t){return e.getAccessToken().pipe((0,i.K)((t=>t instanceof r.O&&t===r.O.invalidRefreshToken?a.o.error(t):e.signInWithWalletlink(l.NF.selectedAddress)))).subscribe({next:n=>{e.setWalletlinkAuthStatus("authed"),t?.()},error:n=>{"User rejected signature request"===n.message&&e.setWalletlinkAuthStatus("rejected"),t?.()}})}(t,e))),[t,e])}},86138:(e,t,n)=>{n.d(t,{n:()=>l});var a=n(67294),r=n(80304),s=n(9643),o=n(76656),i=n(30103);function l(){const e=(0,s.z)(),t=(0,r.m)(),n=(0,o.B)(),l=(0,i.N)("ens_and_username_send"),c=(0,i.N)("ens_and_username_bug_bash"),u=l||c,d=t.getWalletlinkAuthStatus();return(0,a.useMemo)((()=>n?{isEnabled:u,isSuggestionsEnabled:!!u&&(e||"authed"===d)}:{isEnabled:!0,isSuggestionsEnabled:e||"authed"===d}),[n,u,e,d])}}}]);
//# sourceMappingURL=353.js.map